(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{289:function(e,t,n){e.exports=n(550)},550:function(e,t,n){"use strict";n.r(t);var a=n(22),r=n(0),i=n.n(r),c=n(26),o=n.n(c),l=n(551),u=n(553),s=n(554),m=n(12),d=n(68),p=n.n(d),f=n(69),g=n.n(f),h=n(20),E=n.n(h),b=n(71),v=n(196),y=n.n(v),O=Object(r.createContext)({currentUser:null,isAuthenticated:!1,draft:null,pins:[],currentPin:null}),w=Object(m.withStyles)({root:{cursor:"pointer",display:"flex"},buttonText:{color:"white"},buttonIcon:{marginLeft:"5px",color:"white"}})(function(e){var t=e.classes,n=Object(r.useContext)(O).dispatch;return i.a.createElement(b.GoogleLogout,{onLogoutSuccess:function(){n({type:"SIGNOUT_USER"}),console.log("user signed out")},render:function(e){var n=e.onClick;return i.a.createElement("span",{className:t.root,onClick:n},i.a.createElement(E.a,{variant:"body1",className:t.buttonText},"Signout"),i.a.createElement(y.a,{className:t.buttonIcon}))}})}),j=Object(m.withStyles)({main:{flexGrow:1,backgroundImage:"linear-gradient(to right,#33ccff 25%, #ff99cc 100%)"},grow:{flexGrow:1,display:"flex",alignItems:"center"},icon:{marginRight:"5px",color:"green",fontSize:45},mobile:{display:"none"},picture:{height:"50px",marginRight:"10px",backgroundColor:"#e1bee7"},welcome:{background:"linear-gradient(to right,#33ccff 25%, #ff99cc 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},created:{marginLeft:"10px",fontSize:10,marginTop:"25px",color:"#cccc"}})(function(e){var t=e.classes,n=Object(r.useContext)(O).state.currentUser;return i.a.createElement("div",{style:{background:"linear-gradient(to right,#33ccff 25%, #ff99cc 100%)"}},i.a.createElement(p.a,{position:"static"},i.a.createElement(g.a,null,i.a.createElement("div",{className:t.grow},i.a.createElement(E.a,{className:t.welcome,component:"h1",variant:"h3",color:"inherit",noWrap:!0},"Live2Live"),i.a.createElement(E.a,{className:t.created,component:"p",variant:"h6",color:"inherit",noWrap:!0},"Created By: Shahzad")),n&&i.a.createElement("div",{className:t.grow},i.a.createElement("img",{className:t.picture,src:n.picture,alt:n.name}),i.a.createElement(E.a,{variant:"h5",color:"inherit",noWrap:!0},n.name)),i.a.createElement(w,null))))}),x=n(24),k=n(23),C=n.n(k),N=n(33),I=n(44),S=n(72),_="https://live2live.herokuapp.com/graphql",T=function(){var e=Object(r.useState)(""),t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(r.useEffect)(function(){var e=window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;i(e)},[]),new S.GraphQLClient(_,{headers:{authorization:n}})},A=n(32),L=n.n(A),D=n(207),R=n.n(D),P=n(204),W=n(198),G=n.n(W),F=Object(m.withStyles)(function(e){return{root:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},icon:{margin:e.spacing.unit,fontSize:"80px",color:"black"}}})(function(e){var t=e.classes;return i.a.createElement("div",{className:t.root},i.a.createElement(G.a,{className:t.icon}),i.a.createElement(E.a,{noWrap:!0,component:"h2",variant:"h6",align:"center",color:"textPrimary",gutterBottom:!0},"Click on the map to add an Event"))}),U=n(199),z=n.n(U),$=n(54),B=n.n($),q=n(201),M=n.n(q),Y=n(200),Z=n.n(Y),H=n(202),J=n.n(H),Q=n(203),V=n.n(Q),K=Object(m.withStyles)(function(e){return{form:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingBottom:e.spacing.unit},contentField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"95%"},input:{display:"none"},alignCenter:{display:"flex",alignItems:"center"},iconLarge:{fontSize:40,marginRight:e.spacing.unit},leftIcon:{fontSize:20,marginRight:e.spacing.unit},rightIcon:{fontSize:20,marginLeft:e.spacing.unit},button:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit,marginRight:e.spacing.unit,marginLeft:0}}})(function(e){var t=e.classes,n=T(),c=Object(r.useContext)(O),o=c.state,l=c.dispatch,u=Object(r.useState)(""),s=Object(a.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(""),f=Object(a.a)(p,2),g=f[0],h=f[1],b=Object(r.useState)(""),v=Object(a.a)(b,2),y=v[0],w=v[1],j=Object(r.useState)(!1),x=Object(a.a)(j,2),k=x[0],I=x[1],S=function(){var e=Object(N.a)(C.a.mark(function e(t){var a,r,i,c,u,s,d;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),I(!0),e.next=5,A();case 5:return a=e.sent,r=o.draft,i=r.latitude,c=r.longitude,u={title:m,image:a,content:y,latitude:i,longitude:c},e.next=10,n.request("\n  mutation($title: String!, $image: String!, $content: String!, $latitude: Float!, $longitude: Float!) {\n    createPin(input: {\n      title: $title,\n      image: $image,\n      content: $content,\n      latitude: $latitude,\n      longitude: $longitude\n    }) {\n      _id\n      createdAt\n      title \n      image\n      content\n      latitude\n      longitude\n      author {\n        _id\n        name\n        email\n        picture\n      }\n    }\n  }\n",u);case 10:s=e.sent,d=s.createPin,l({type:"CREATE_PIN",payload:d}),_(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),I(!1),console.error("error creating pin",e.t0);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),_=function(){d(""),h(""),w(""),l({type:"DELETE_DRAFT"})},A=function(){var e=Object(N.a)(C.a.mark(function e(){var t,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",g),t.append("upload_preset","live2live"),t.append("cloud_name","inightelf"),e.next=6,z.a.post("https://api.cloudinary.com/v1_1/inightelf/image/upload",t);case 6:return n=e.sent,e.abrupt("return",n.data.url);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return i.a.createElement("form",{className:t.form},i.a.createElement(E.a,{className:t.alignCenter,component:"h2",varient:"h6",color:"secondary"},i.a.createElement(Z.a,{className:t.iconLarge})),i.a.createElement("div",null,i.a.createElement(B.a,{name:"title",label:"Event",placeholder:"Event name",onChange:function(e){return d(e.target.value)}}),i.a.createElement("input",{className:t.input,accept:"image/*",id:"image",type:"file",onChange:function(e){return h(e.target.files[0])}}),i.a.createElement("label",{htmlFor:"image"},i.a.createElement(L.a,{style:{color:g&&"red"},className:t.button,component:"span",size:"small"},i.a.createElement(M.a,null)))),i.a.createElement("div",{className:t.contentField},i.a.createElement(B.a,{multiline:!0,rows:"5",margin:"normal",fullWidth:!0,name:"content",label:"Place",varient:"outlined",onChange:function(e){return w(e.target.value)}})),i.a.createElement("div",null,i.a.createElement(L.a,{onClick:_,className:t.button,varient:"contained",color:"primary"},i.a.createElement(J.a,{className:t.leftIcon}),"Discard"),i.a.createElement(L.a,{type:"submit",className:t.button,varient:"contained",color:"secondary",disabled:!m.trim()||!g||!y.trim()||k,onClick:S},"Submit",i.a.createElement(V.a,{className:t.rightIcon}))))}),X=Object(m.withStyles)({root:{minWidth:350,maxWidth:400,maxHeight:"calc(100vh - 64px)",overflowY:"scroll",display:"flex",justifyContent:"center"}})(function(e){var t,n=e.classes,a=Object(r.useContext)(O).state.draft;return a?a&&(t=K):t=F,i.a.createElement(P.a,{className:n.root},i.a.createElement(t,null))}),ee=n(205),te=n.n(ee),ne=function(e){var t=e.size,n=e.color,a=e.onClick;return i.a.createElement(te.a,{onClick:a,style:{fontSize:t,color:n}})},ae=n(116),re=n.n(ae),ie=n(206),ce={latitude:37.7577,longitude:-122.4376,zoom:13},oe=Object(m.withStyles)({root:{display:"flex"},rootMobile:{display:"flex",flexDirection:"column-reverse"},navigationControl:{position:"absolute",top:0,left:0,margin:"1em"},deleteIcon:{color:"red"},popupImage:{padding:"0.4em",height:200,width:200,objectFit:"cover"},popupTab:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}})(function(e){var t=e.classes;Object(r.useEffect)(function(){j()},[]);var n=Object(r.useState)(null),c=Object(a.a)(n,2),o=c[0],l=c[1],u=T(),s=Object(r.useContext)(O),m=s.state,d=s.dispatch,p=Object(r.useState)(ce),f=Object(a.a)(p,2),g=f[0],h=f[1],b=Object(r.useState)(null),v=Object(a.a)(b,2),y=v[0],w=v[1];Object(r.useEffect)(function(){k()},[]);var j=function(){var e=Object(N.a)(C.a.mark(function e(){var t,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.request("\n{\n  getPins {\n    _id\n    createdAt\n    title\n    image\n    content\n    latitude\n    longitude\n    author {\n      _id\n      name\n      email\n      picture\n    }\n    comments {\n      text\n      createdAt\n      author {\n        _id\n        name\n        picture\n      }\n    }\n  }\n}\n");case 2:t=e.sent,n=t.getPins,d({type:"GET_PINS",payload:n});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),k=function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){var t=e.coords,n=t.latitude,a=t.longitude;h(Object(x.a)({},g,{latitude:n,longitude:a})),w({latitude:n,longitude:a})})},S=function(e){return re()(Date.now(),Number(e.createdAt))<=30?"black":"purple"},_=function(){var e=Object(N.a)(C.a.mark(function e(t){var n,a,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={pinId:t._id},e.next=3,u.request("\n  mutation($pinId: ID!){\n    deletePin(pinId: $pinId) {\n      _id\n    }\n  }\n",n);case 3:a=e.sent,r=a.deletePin,d({type:"DELETE_PIN",payload:r}),l(null);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:t.root},i.a.createElement(I.c,Object.assign({width:"100vw",height:"calc(100vh - 64px)",mapStyle:"mapbox://styles/mapbox/streets-v9",mapboxApiAccessToken:"pk.eyJ1IjoiaW5pZ2h0ZWxmIiwiYSI6ImNqdWRtMWM3ODB2aDA0ZHF5aGU1dTZidjkifQ.DrZulGHSR0xb_I3mAkpWmw",onViewportChange:function(e){return h(e)},onClick:function(e){var t=e.lngLat;if(e.leftButton){m.draft||d({type:"CREATE_DRAFT"});var n=Object(a.a)(t,2),r=n[0],i=n[1];d({type:"UPDATE_DRAFT_LOCATION",payload:{longitude:r,latitude:i}})}}},g),y&&i.a.createElement(I.a,{latitude:y.latitude,longitude:y.longitude,offsetLeft:-20,offsetTop:-35},i.a.createElement(ne,{size:40,color:"green"})),m.draft&&i.a.createElement(I.a,{latitude:m.draft.latitude,longitude:m.draft.longitude,offsetLeft:-20,offsetTop:-35},i.a.createElement(ne,{size:40,color:"blue"})),m.pins.map(function(e){return i.a.createElement(I.a,{key:e._id,latitude:e.latitude,longitude:e.longitude,offsetLeft:-20,offsetTop:-35},i.a.createElement(ne,{onClick:function(){return function(e){l(e),d({type:"SET_PIN",payload:e})}(e)},size:40,color:S(e)}))}),o&&i.a.createElement(I.b,{anchor:"top",latitude:o.latitude,longitude:o.longitude,closeOnClick:!1,onClose:function(){return l(null)},style:{width:"100px"}},i.a.createElement("img",{className:t.popupImage,src:o.image,alt:o.title}),i.a.createElement("div",{className:t.popupTab},i.a.createElement(E.a,null,o.title),i.a.createElement(E.a,null,o.content),i.a.createElement(E.a,null,Object(ie.format)(Number(o.createdAt),"MMM Do, YYYY")),m.currentUser._id===o.author._id&&i.a.createElement(L.a,{onClick:function(){return _(o)}},i.a.createElement(R.a,{className:t.deleteIcon}))))),i.a.createElement(X,null))}),le=n(76),ue=n.n(le),se=n(70),me=n.n(se),de=Object(m.createMuiTheme)({palette:{primary:{light:"#616161",main:"#212121",dark:"#424242"},secondary:{light:ue.a[300],main:ue.a[500],dark:ue.a[700]}},typography:{useNextVariants:!0}});var pe=function(e){return function(t){return i.a.createElement(m.MuiThemeProvider,{theme:de},i.a.createElement(me.a,null),i.a.createElement(e,t))}}(function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(j,null),i.a.createElement(oe,null))}),fe=Object(m.withStyles)({login:{height:"100vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},welcome:{background:"linear-gradient(to right,#33ccff 25%, #ff99cc 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}})(function(e){var t=e.classes,n=Object(r.useContext)(O).dispatch,a=function(){var e=Object(N.a)(C.a.mark(function e(t){var a,r,i;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.getAuthResponse().id_token,r=new S.GraphQLClient(_,{headers:{authorization:a}}),e.next=5,r.request("\n{\n  self {\n    _id\n    name\n    email\n    picture\n  }\n}\n");case 5:i=e.sent,n({type:"USER_LOGIN",payload:i.self}),n({type:"LOGGED_IN",payload:t.isSignedIn()}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),c=function(e){console.error("Error logging in",e),n({type:"LOGGED_IN",payload:!1})};return i.a.createElement("div",{className:t.login},i.a.createElement(E.a,{component:"h1",variant:"h3",gutterBottom:!0,noWrap:!0},i.a.createElement("div",{className:t.welcome},"Welcome to Live2Live")),i.a.createElement(b.GoogleLogin,{clientId:"51693100956-43t4hnhtlqbhmoa9pelerdaq9nk0iee2.apps.googleusercontent.com",onSuccess:a,onFailure:c,isSignedIn:!0}))}),ge=n(552),he=function(){return Object(r.useContext)(O).state.isAuthenticated?i.a.createElement(ge.a,{to:"/"}):i.a.createElement(fe,null)},Ee=n(209),be=function(e){var t=e.component,n=Object(Ee.a)(e,["component"]),a=Object(r.useContext)(O).state;return i.a.createElement(s.a,Object.assign({render:function(e){return a.isAuthenticated?i.a.createElement(t,e):i.a.createElement(ge.a,{to:"/login"})}},n))},ve=n(208);function ye(e,t){switch(t.type){case"USER_LOGIN":return Object(x.a)({},e,{currentUser:t.payload});case"LOGGED_IN":return Object(x.a)({},e,{isAuthenticated:t.payload});case"SIGNOUT_USER":return Object(x.a)({},e,{isAuthenticated:!1,currentUser:null});case"CREATE_PIN":var n=t.payload,a=e.pins.filter(function(e){return e._id!==n._id});return Object(x.a)({},e,{pins:[].concat(Object(ve.a)(a),[n])});case"DELETE_PIN":var r=t.payload,i=e.pins.filter(function(e){return e._id!==r._id});return Object(x.a)({},e,{pins:i,currentPin:null});case"SET_PIN":return Object(x.a)({},e,{currentPin:t.payoad,draft:null});case"CREATE_DRAFT":return Object(x.a)({},e,{currentPin:null,draft:{longitude:0,latitude:0}});case"UPDATE_DRAFT_LOCATION":return Object(x.a)({},e,{draft:t.payload});case"DELETE_DRAFT":return Object(x.a)({},e,{draft:null});case"GET_PINS":return Object(x.a)({},e,{pins:t.payload});default:return e}}n(548);var Oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function we(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(i.a.createElement(function(){var e=Object(r.useContext)(O),t=Object(r.useReducer)(ye,e),n=Object(a.a)(t,2),c=n[0],o=n[1];return i.a.createElement(l.a,null,i.a.createElement(O.Provider,{value:{state:c,dispatch:o}},i.a.createElement(u.a,null,i.a.createElement(be,{exact:!0,path:"/",component:pe}),i.a.createElement(s.a,{path:"/login",component:he}))))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/v8-geckos-team-02",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/v8-geckos-team-02","/service-worker.js");Oe?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):we(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):we(t,e)})}}()}},[[289,2,1]]]);
//# sourceMappingURL=main.fffa5b1a.chunk.js.map